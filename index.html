<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VIVE QUINTAY - OPERADOR</title>
<style>
body { background: #0A2F4F; color: white; font-family: sans-serif; text-align: center; margin: 0; padding: 20px; }
input { padding: 18px; width: 85%; font-size: 24px; border-radius: 10px; border: none; text-transform: uppercase; margin-bottom: 20px; }
button { padding: 18px; width: 90%; font-size: 22px; background: #00E0D0; color: #0A2F4F; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; }

/* Estilos de las Gráficas de Resultado */
.resultado-box { margin-top: 30px; padding: 25px; border-radius: 15px; font-size: 26px; font-weight: bold; }
.pago-ok { background: #00C853; color: white; border: 4px solid #adffbc; } /* Verde para Diario */
.pago-pendiente { background: #FFAB00; color: #0A2F4F; border: 4px solid #fff3cd; } /* Naranja para Minutos */
.no-existe { background: #FF5252; color: white; }
.info-hora { display: block; font-size: 16px; margin-top: 10px; opacity: 0.8; }
</style>
</head>
<body>

<h1>VIVE QUINTAY</h1>
<p>Control de Acceso</p>

<input type="text" id="p" placeholder="PATENTE" autocomplete="off">
<br>
<button onclick="v()">VERIFICAR AHORA</button>

<div id="res"></div>

<script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-firestore-compat.js"></script>

<script>
const config = {
  apiKey: "AIzaSyAXGH39g0gLBjVF0XHznEoDwG3O8xrD76k",
  authDomain: "vive-quintay-spa.firebaseapp.com",
  projectId: "vive-quintay-spa",
  storageBucket: "vive-quintay-spa.firebasestorage.app",
  messagingSenderId: "1016972577353",
  appId: "1:1016972577353:web:6b8da9a1fc38b2bd640d98"
};
firebase.initializeApp(config);
const dbase = firebase.firestore();

async function v() {
  const pat = document.getElementById('p').value.trim().toUpperCase();
  const r = document.getElementById('res');
  if(!pat) return;
  
  r.innerHTML = "Consultando...";

  try {
    const doc = await dbase.collection("activos").doc(pat).get();
    if(doc.exists) {
      const d = doc.data();
      
      if(d.tipo === "Pase Diario") {
        r.innerHTML = `
          <div class="resultado-box pago-ok">
            ✅ PASE DIARIO<br>
            <span style="font-size:18px;">PAGADO</span>
            <span class="info-hora">Ingreso: ${d.hora}</span>
          </div>`;
      } else {
        r.innerHTML = `
          <div class="resultado-box pago-pendiente">
            PENDIENTE ⁉️<br>
            <span style="font-size:18px;">POR MINUTO</span>
            <span class="info-hora">Ingreso: ${d.hora}</span>
          </div>`;
      }
    } else {
      r.innerHTML = '<div class="resultado-box no-existe">NO REGISTRADO ❌</div>';
    }
  } catch(e) { r.innerHTML = "Error de conexión"; }
}

// Enter para buscar rápido
document.getElementById('p').addEventListener('keypress', (e) => { if(e.key === 'Enter') v(); });
</script>

</body>
</html>
